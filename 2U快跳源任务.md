# 任务分解
* 原则1：自己的数据处理完以后发给对方
* 原则2：不回传对方信号，单通道传输
## 5.14 - 5.16
* 分析代码架构，拆解代码功能，确定新代码架构
  * 串口收发，tcp收发，udp收发，轮询监控发送，4种通信，底层串口和fpga(memcpy)到地址
  * 串口：串口初始化，收发数据，是否启用队列？因为定时写，定时读
  * tcp：scpi，tcp初始化，scpi库学习
  * udp：udp初始化，udp收发
  * log初始化，log写文件
* pthread学习
* 线程框架搭建
* 串口初始化和收发数据解析  -√

## 5.17 
* param data 解析书写 大列表  --√

## 5.20 - 5.25
* param 大list解析书写   --√
* param func解析书写    --√
* param 列表增删改查解析书写  --√
* fpga地址整理 书写   --√

## 5.27 - 5.31
* scpi库学习
* tcp初始化 + scpi数据解析

## 6.3 - 6.8
* 校准数据读写
* udp初始化 + 数据解析
* log学习
* log书写

## 2U模拟源宋工串口更改
* 版本1：加一个开关，有协议的，在分频的地方加
* 版本2：更改分频范围，然后9k-5.6G的dds2要打开能往下发

## 多模块上位机更改
* 按照输入的数字，转换成bit然后使用串口发下去

## 3U线性切列表逻辑更改    --√
* 加载列表文件以后，需要记住上一次加载的文件
* 线性切列表的时候就再加载一次文件出信号
* 第一次未加载文件的时候，前面板显示报错error
* 校准文件查表里面功率存的是0.01dbm的值，所以从文件加载功率要再乘以100

## 6.3日周任务编辑
* 幅相模块代码调整 0.5         --√
* 2U快跳源SCPI编码完成 1.7    --√
* 2U快跳源Log和UDP编码完成  1.3  --√       // 周三 - 周三下班
* 2U快跳源功率校准功能编码完成 1.5 --√ // 周四中午 - 周五下班

## 测试问题
1-PS->FPGA发指令的时候会死，出现段错误
2-前面板死机 --快跳源系统只有uart1 没有uart3 不能配置  --√
3-前面板->PS发送指令协议对不上 错误    --Linux只能1字节1字节的读取 --√
4-PS->前面板发送reset 未接收到 在debug的时候就是好的
5-ps->PL发送banding pulse 参数错位了，函数列表少了一位空  --√
6-ps->pl38卡死 还不知道为什么 -- 写pl地址要给指针  --√


## 测试项目 最大最小值
1-preset  --√
  前面板有问题  --√
2-频率     --√
3-功率     --√
4-freq incr --√
5-freq incr func --√
6-freq osc  --√
7-ampl incr --√
8-ampl incr func --√
9-pulse界面正常
10-sweep 扫描  --√
  扫描开启死机  --pl地址没有取指针 --√
  扫描计算初始功率频率步进不对   --step计算错误  --√
11-前面板 preset 好多都没有复位  --√
12-前面板 sweep 步进频率设置反算point以后 没有重新反算步进频率  --√
13-LIST除列表以外界面  --√
14-LIST list  --√
  ps dwell初始值不对  --√
  preset 列表没有重置  --√
  增删改查  --√
  扫列表    --√
15- rf mod sw --√


## PS测试问题
1-找到的校准数据差一行
2-scpi每次都发remote指令  --√
3-延时不够  --加到20ms了  --√
4-scpi发的功率少乘单位 unit10  -√
5-大列表频率10G应该是10e10  --√
6-scpi 查询freq pow step的时候没有返回RES_OK --√
9-sweep points 发1死机，888也能发，大小判断  --只有最小值，没有最大值 --√
10-trigger 设置ext以后，前面显示bus，而且设置bus key，后面也显示ext --√
11-sweep dwell 小数位数不对，1s=1e9  时间单位错误  --√

## PS测试问题
1-points最大值判断 依据step的最小值判断               --√
2-pulse trigger 从ext切换成其它显示失败，后台查询正确   --没懂 好像是正确的
3-pri pw前后单位对不然，后面发20us，前面板显示200us     -- 单位不统一，单位是10ns 输入10ns 发送1ns
4-list scpi有问题 
  list add/delete无法使用，加单位 单位解析错误 -- list_array[3]书写格式错误 --√
  list read one line 错误  --函数使用不对  查询指令有问题  --√
5-func 前面板收不到 --发送的函数指令错误 用成param_no了  --√

6-前面板往后发日期后面会死机   --没有添加h文件里面的函数  --√
7-IP不能更改，开机时后面给前面板发ip为0  --√
8-save 和load userpreset好像没有执行  --执行了，只是load没向前面板发送  --√
9-ampl校准差一行 需要看一下为什么